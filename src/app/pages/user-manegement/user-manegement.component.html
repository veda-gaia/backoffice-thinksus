<div class="card-score">
  <div class="card-score-info">
    <div class="form-header">
      <h2>Controle de usuários</h2>
      <p>Cadastre e gerencie usuários</p>
    </div>

    <button
      mat-raised-button
      color="primary"
      class="btn-novo-usuario"
      (click)="openUserEditModal(0)"
    >
      Novo usuário
    </button>
  </div>

  <div class="tabela-container">
    <table mat-table [dataSource]="dataSource" matSort class="full-width-table">
      <ng-container matColumnDef="useractive">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="col-useractive"
        ></th>
        <td mat-cell *matCellDef="let user">
          <mat-icon [color]="user.active ? 'primary' : 'warn'">
            {{ user.active ? "check_circle" : "cancel" }}
          </mat-icon>
        </td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="col-username"
        >
          Nome
        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.name }}
        </td>
      </ng-container>

      <ng-container matColumnDef="email">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="col-useremail"
        >
          E-mail
        </th>
        <td mat-cell *matCellDef="let user">
          {{ user.email }}
        </td>
      </ng-container>

      <ng-container matColumnDef="permissoes">
        <th
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          class="col-userpermissions"
        >
          Permissões
        </th>
        <td mat-cell *matCellDef="let user">
          <span style="white-space: pre-line">
            {{ getEnumNames(user.funcionalitypermissions) }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="acoes">
        <th mat-header-cell *matHeaderCellDef>Ações</th>
        <td mat-cell *matCellDef="let user">
          <button mat-icon-button (click)="openUserEditModal(user._id)">
            <mat-icon>edit</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator
      [pageSize]="5"
      [pageSizeOptions]="[5, 10]"
      showFirstLastButtons
    ></mat-paginator>
  </div>
</div>
